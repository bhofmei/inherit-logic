webpackJsonp([0],{927:function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,s,a):r(t,s))||a);return n>3&&a&&Object.defineProperty(t,s,a),a};Object.defineProperty(t,"__esModule",{value:!0});const r=s(1),n=s(16),a=s(54),o=s(972),l=s(930),c=s(982),h=s(948),p=s(943),u=s(947),d=s(944),g=s(945),f=s(946);let m=class{};m=i([r.NgModule({imports:[a.SharedModule,n.RouterModule.forChild(o.LocationRoutes)],declarations:[c.FridgeComponent,h.PhageDialogComponent,p.LocationComponent,d.LabRoomComponent,g.PlexerRoomComponent,f.ModelRoomComponent,u.LandingRoomComponent],entryComponents:[h.PhageDialogComponent],providers:[l.ExperimentService]})],m),t.LocationModule=m},928:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CricketGlobals={numPhage:1e6,plateCapacity:1500,plexerCapacity:200,nFridgeShelf:32,nFridgeSpots:16,defaultLabDilution:10,defaultPlexerDilution:5,geneLength:350,deletionGuessLength:10}},930:function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,s,a):r(t,s))||a);return n>3&&a&&Object.defineProperty(t,s,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),a=s(46);let o=class{constructor(e){this._http=e,this._baseURL="/api/cricket"}createPlate(e){return this._http.post(`${this._baseURL}/plate`,e)}performPlexer(e){return this._http.post(`${this._baseURL}/plexer`,e)}};o=i([n.Injectable(),r("design:paramtypes",[a.HttpClient])],o),t.ExperimentService=o},943:function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,s,a):r(t,s))||a);return n>3&&a&&Object.defineProperty(t,s,a),a};Object.defineProperty(t,"__esModule",{value:!0});let r=class{};r=i([s(1).Component({selector:"location",templateUrl:s(973),styleUrls:[s(974)]})],r),t.LocationComponent=r},944:function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,s,a):r(t,s))||a);return n>3&&a&&Object.defineProperty(t,s,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),a=s(26),o=s(928),l=s(930),c=s(121),h=s(45);let p=class{constructor(e,t){this._experimentService=e,this._scenarioService=t,this.selectedObject=null,this.isHidden={K:!1,B:!1},this.phage=[],this.dilutionValue=o.CricketGlobals.defaultLabDilution,this.canEditDilution=!0,this.isEmpty=!0,this.lawnType="",this.isFull=!1,this.errorMessage="",this.isDestroyed$=new a.Subject,this.contents=[null,null,null,null],this.visibleLabel=[!0,!1,!1,!1]}ngOnInit(){this._scenarioService.getScenarioDetails.takeUntil(this.isDestroyed$).subscribe(e=>{this.scenarioDetails=e})}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.unsubscribe()}clearTubes(){this.phage=[],this.isHidden={K:!1,B:!1},this.errorMessage="",this.contents=[null,null,null,null],this.visibleLabel=[!0,!1,!1,!1],this.canEditDilution=!0}clearPlate(){this.isFull=!1,this.isEmpty=!0,this.genotypes=[],this.smallPlaqueList=[],this.largePlaqueList=[],this.errorMessage="",this.lawnType=""}clearAll(){this.clearTubes(),this.clearPlate()}canDragBact(){return this.phage.length>0}getDataBact(e){return{lawnType:e,src:e,phage:this.phage}}getClassesBact(e){return{"bact-tube test-tube-outer":!0,invisible:"B"===e?this.isHidden.B:this.isHidden.K,"tube-b":"B"===e,"tube-k":"K"===e,"n-phage-1":1===this.phage.length,"n-phage-2":2===this.phage.length}}dropPhageBact(e,t){var s=e.data;if(0==s.hasOwnProperty("id"))this.errorMessage="Only add phage from the fridge";else if(this.phage.length>=2)this.errorMessage="Cannot have more than 2 phage in a tube";else switch(this.phage.push({id:s.id,strainNum:s.strainNum,numPhage:o.CricketGlobals.numPhage}),t){case"B":this.isHidden.K=!0;break;case"K":this.isHidden.B=!0}}canDragDil(e){return null!==this.contents[e]}getClassesDil(e){let t=this.contents[e];return{"dil-tube test-tube-outer":!0,"tube-b":null!==t&&"B"===t.lawnType,"tube-k":null!==t&&"K"===t.lawnType}}getClassesDilLabel(e){return{"dil-value":!0,invisible:!this.visibleLabel[e]}}canDropDil(e){return t=>{if(null===t||void 0===t)return!1;if(!1===t.hasOwnProperty("src"))return!1;let s=t.src;return 0===e&&("B"===s||"K"===s)||e>0&&s===e-1}}getDataDil(e){return null!==this.contents[e]&&(this.contents[e].src=e),this.contents[e]}dropContentsDil(e,t){let s=JSON.parse(JSON.stringify(e.data));if(s.hasOwnProperty("lawnType")&&s.hasOwnProperty("phage")){for(let e=0;e<s.phage.length;e++)s.phage[e].numPhage/=this.dilutionValue;this.contents[t]=s,t<3&&(this.visibleLabel[t+1]=!0),this.canEditDilution=!1}}getClassesPlate(){return{"col-12 col-md-5 rounded-circle border border-dark":!0,"bg-secondary text-light":this.isFull,"bg-light text-primary":!this.isFull&&!this.isEmpty,"text-danger":"K"===this.lawnType,"text-info":"B"===this.lawnType}}canDropPlate(){return e=>{return null!==e&&void 0!==e&&!(!e.hasOwnProperty("src")||-1!==["B","K","small","large"].indexOf(e.src))}}dropOnPlate(e){let t=e.data;if(!1===t.hasOwnProperty("lawnType"))return void(this.errorMessage="There is no bacteria in the tube for phage to grow on.");if(!1===t.hasOwnProperty("phage")||0===t.phage.length)return void(this.errorMessage="There is no phage in the tube.");if("B"===t.src||"K"===t.src)return void(this.errorMessage="Do not plate directly from bacteria tube");this.lawnType=t.lawnType;let s=t.phage[0],i=null;2===t.phage.length&&(i=t.phage[1]),this._performCross(this.lawnType,s,i)}_performCross(e,t,s){let i={lawnType:e,phage1:t,phage2:s,specials:{},location:"lab",scenarioData:this.scenarioDetails,capacity:o.CricketGlobals.plateCapacity};this._experimentService.createPlate(i).takeUntil(this.isDestroyed$).subscribe(e=>{this.isFull=e.full,this.smallPlaqueList=e.smallPlaque,this.largePlaqueList=e.largePlaque,this.isEmpty=!1,this.genotypes=e.genotypes,this.plateParents=e.parents},e=>{this.errorMessage=h.readErrorMessage(e)})}canDragPlate(e){return"small"===e?this.smallPlaqueList.length>0:this.largePlaqueList.length>0}getPhagePlate(e){let t="small"===e?this.smallPlaqueList:this.largePlaqueList;if(0===t.length)return null;let s=t[0],i=JSON.parse(JSON.stringify(this.genotypes[s]));return i.src=e,i.parents=this.plateParents,i}addedToFridge(e){"small"===e.data.src?this.smallPlaqueList.shift():this.largePlaqueList.shift()}delPhagePlate(e){"small"===e?this.smallPlaqueList.shift():this.largePlaqueList.shift()}};p=i([n.Component({selector:"lab-room",templateUrl:s(975),styleUrls:[s(976)]}),r("design:paramtypes",[l.ExperimentService,c.CricketService])],p),t.LabRoomComponent=p},945:function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,s,a):r(t,s))||a);return n>3&&a&&Object.defineProperty(t,s,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),a=s(13),o=s(928),l=s(930),c=s(121),h=s(45);let p=class{constructor(e,t){this._experimentService=e,this._scenarioService=t,this.chosenBact="none",this.dilutionValue=o.CricketGlobals.defaultPlexerDilution,this.plexerType="plexer",this.nStrains=[0,0],this.errorMessage="",this._spinnerClass={hiding:!0,spinning:!1,"oi oi-loop-circular":!0},this.dilutionControl=new a.FormControl("",[a.Validators.min(.1),a.Validators.max(100)]),this._clearData()}ngOnInit(){this.subscription=this._scenarioService.getScenarioDetails.subscribe(e=>this.scenarioDetails=e)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.expSubscription&&this.expSubscription.unsubscribe()}_clearData(){this.rows=[],this.cols=[];for(let e=0;e<8;e++)this.rows.push(null),this.cols.push(null);this.nStrains=[0,0]}reset(){this.chosenBact="none",this.dilutionValue=o.CricketGlobals.defaultPlexerDilution,this.plexerType="plexer",this._clearData(),this.results={},this.errorMessage="",this._setSpinnerClass("reset")}getTubeClasses(e){return{"btn border border-secondary":!0,chosen:this.chosenBact===e,"btn-outline-info":"B"===e&&this.chosenBact!==e,"btn-info":"B"===e&&this.chosenBact===e,"btn-outline-danger":"K"===e&&this.chosenBact!==e,"btn-danger":"K"===e&&this.chosenBact===e}}submitDisabled(){if(this._spinnerClass.spinning)return!0;var e="none"===this.chosenBact;return 0===this.nStrains[0]||0===this.nStrains[1]||(this.dilutionValue<.1||this.dilutionValue>20||e)}_cleanArrays(e){return e.filter(e=>null!==e).map(e=>({id:e.id,strainNum:e.strainNum,numPhage:e.numPhage/(1e3*this.dilutionValue)}))}_unCleanResults(e){let t={},s={},i=0,r=0;for(let e=0;e<this.cols.length;e++){null!==this.cols[e]&&(s[r]=e,r++)}for(let r in this.rows)if(null!==this.rows[r]){let n=e[i],a={};for(let e in n){a[s[e]]=n[e]}t[r]=a,i++}return t}_setSpinnerClass(e){this._spinnerClass.hiding="spinning"!==e,this._spinnerClass.spinning="spinning"===e}getSpinnerClass(){return this._spinnerClass}performPlexer(){this._setSpinnerClass("spinning");let e=this.rows,t=this._cleanArrays(e),s=this._cleanArrays(this.cols);var i={lawnType:this.chosenBact,rowPhage:t,colPhage:s,specials:{},location:this.plexerType,scenarioData:this.scenarioDetails,capacity:o.CricketGlobals.plexerCapacity};this.expSubscription=this._experimentService.performPlexer(i).subscribe(e=>{this.results=this._unCleanResults(e),this._setSpinnerClass("hiding")},e=>{this.errorMessage=h.readErrorMessage(e),this._setSpinnerClass("hiding")})}addPhage(e,t,s){let i=e.data,r={id:i.id,strainNum:i.strainNum,numPhage:o.CricketGlobals.numPhage};"row"===t&&s<8?(this.rows[s]=r,this.nStrains[0]=this.rows.filter(function(e){return null!==e}).length):s<8&&(this.cols[s]=r,this.nStrains[1]=this.cols.filter(function(e){return null!==e}).length)}};p=i([n.Component({selector:"plexer-room",templateUrl:s(977),styleUrls:[s(978)]}),r("design:paramtypes",[l.ExperimentService,c.CricketService])],p),t.PlexerRoomComponent=p},946:function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,s,a):r(t,s))||a);return n>3&&a&&Object.defineProperty(t,s,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),a=s(16),o=s(26),l=s(17),c=s(121),h=s(928),p=s(45);let u=class{constructor(e,t,s,i){this._router=e,this._route=t,this._authenticationService=s,this._scenarioService=i,this.errorMessage="",this.isDestroyed$=new o.Subject,this.stepSize=h.CricketGlobals.deletionGuessLength,this.geneAr=[];let r=Math.ceil(h.CricketGlobals.geneLength/this.stepSize);for(let e=0;e<r;e++)this.geneAr.push(e);this._width=(100/r).toString()}ngOnInit(){let e=this._authenticationService.getUser();e&&(this.userId=e.id),this.scenarioId=this._route.parent.snapshot.paramMap.get("scenId"),this._scenarioService.getGuesses.takeUntil(this.isDestroyed$).subscribe(e=>{this.guesses=e,this.keys=Object.keys(e).map(e=>Number.parseInt(e)),0===this.keys.length?this.errorMessage="No phage available for modelling":this.errorMessage=""},e=>{this.errorMessage=p.readErrorMessage(e)})}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.unsubscribe()}getBlockClass(e,t){let s=this.guesses[e][t];return{"guess-block btn p-0":!0,"btn-outline-secondary":!s,"bg-dark":s}}toggleBlock(e,t){let s=this.guesses[e][t];this.guesses[e][t]=!s}saveData(){this.errorMessage="";JSON.stringify(this.guesses);this._scenarioService.saveDeletions(this.guesses,this.userId,this.scenarioId).takeUntil(this.isDestroyed$).subscribe(e=>{this.guesses=JSON.parse(e),this._scenarioService.setScenario(null,e)},e=>{this.errorMessage=p.readErrorMessage(e)})}};u=i([n.Component({selector:"model-room",templateUrl:s(979),styleUrls:[s(980)]}),r("design:paramtypes",[a.Router,a.ActivatedRoute,l.AuthenticationService,c.CricketService])],u),t.ModelRoomComponent=u},947:function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,s,a):r(t,s))||a);return n>3&&a&&Object.defineProperty(t,s,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),a=s(16),o=s(121);let l=class{constructor(e,t,s){this._router=e,this._route=t,this._scenarioService=s}ngOnInit(){let e=this._route.parent.snapshot.paramMap.get("scenId");this.subscription=this._scenarioService.getScenario(e).subscribe(e=>{this.scenario=e},e=>this._router.navigate(["/"]))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}};l=i([n.Component({selector:"landing-room",templateUrl:s(981)}),r("design:paramtypes",[a.Router,a.ActivatedRoute,o.CricketService])],l),t.LandingRoomComponent=l},948:function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,s,a):r(t,s))||a);return n>3&&a&&Object.defineProperty(t,s,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),a=s(70);let o=class{constructor(e){this.activeModal=e}};i([n.Input(),r("design:type",Object)],o.prototype,"phage",void 0),o=i([n.Component({selector:"phage-dialog-content",templateUrl:s(983)}),r("design:paramtypes",[a.NgbActiveModal])],o),t.PhageDialogComponent=o},972:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=s(943),r=s(92),n=s(944),a=s(945),o=s(946),l=s(947);t.LocationRoutes=[{path:"",component:i.LocationComponent,canActivate:[r.LoggedInGuard],children:[{path:"lab-room",component:n.LabRoomComponent,data:{breadcrumbs:"Lab"}},{path:"plexer-room",component:a.PlexerRoomComponent,data:{breadcrumbs:"Plexer"}},{path:"model-room",component:o.ModelRoomComponent,data:{breadcrumbs:"Model"}},{path:"info",component:l.LandingRoomComponent},{path:"",component:l.LandingRoomComponent}]}]},973:function(e,t,s){e.exports=s.p+"public/app/cricket/location/location.template.html"},974:function(e,t,s){e.exports=s.p+"public/app/cricket/location/location.style.css"},975:function(e,t,s){e.exports=s.p+"public/app/cricket/location/lab-room/lab-room.template.html"},976:function(e,t,s){e.exports=s.p+"public/app/cricket/location/lab-room/lab-room.style.css"},977:function(e,t,s){e.exports=s.p+"public/app/cricket/location/plexer-room/plexer-room.template.html"},978:function(e,t,s){e.exports=s.p+"public/app/cricket/location/plexer-room/plexer-room.style.css"},979:function(e,t,s){e.exports=s.p+"public/app/cricket/location/model-room/model-room.template.html"},980:function(e,t,s){e.exports=s.p+"public/app/cricket/location/model-room/model-room.style.css"},981:function(e,t,s){e.exports=s.p+"public/app/cricket/location/landing-room/landing-room.template.html"},982:function(e,t,s){"use strict";var i=this&&this.__decorate||function(e,t,s,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,s,a):r(t,s))||a);return n>3&&a&&Object.defineProperty(t,s,a),a},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),a=s(16),o=s(70),l=s(26),c=s(121),h=s(17),p=s(928),u=s(948),d=s(45);let g=class{constructor(e,t,s,i,r){this._router=e,this._route=t,this._authenticationService=s,this._scenarioService=i,this._modalService=r,this.shelf=0,this.errorMessage="",this.maxShelf=p.CricketGlobals.nFridgeShelf,this.spots=p.CricketGlobals.nFridgeSpots,this.isDestroyed$=new l.Subject}ngOnInit(){this.user=this._authenticationService.getUser();let e=this.user.id;this.paramObserver=this._route.params.subscribe(t=>{let s=t.scenId;this._scenarioService.getFridge(e,s).takeUntil(this.isDestroyed$).subscribe(e=>{this._initFridge(e)},t=>{307===t.status?this._createFridge(e,s):this.errorMessage=d.readErrorMessage(t)})})}ngOnDestroy(){this.paramObserver.unsubscribe(),this.isDestroyed$.next(!0),this.isDestroyed$.unsubscribe()}_createFridge(e,t){this._scenarioService.createFridge(e,t).takeUntil(this.isDestroyed$).subscribe(e=>{this._initFridge(e)},e=>{this.errorMessage=d.readErrorMessage(e)})}_initFridge(e){this.fridge=e,this.strains=this._fillStrains(e.strains),this._currStrains(),this._scenarioService.setScenario(e.scenarioDetails,e.guesses)}_fillStrains(e){var t=[];for(let e=0;e<this.maxShelf*this.spots;e++)t.push({strainNum:e,phageType:"empty",comment:"",id:""});this.nextSpot=e[0].strainNum+1;for(let s=0;s<e.length;s++){let i=e[s].strainNum;t[i]=e[s],this.nextSpot=i===this.nextSpot?i+1:this.nextSpot}return t}_currStrains(){let e=this.shelf*this.spots,t=e+this.spots;this.currStrains=this.strains.slice(e,t)}getPhageClass(e){let t=this.strains[e];return{"col-7 col-xl-8 p-0 strain-image":!0,"strain-image-reference":"reference"===t.phageType,"strain-image-unknown":"unknown"===t.phageType,"strain-image-submitted":t.submitted}}changeShelf(e){this.errorMessage="",this.shelf<=this.maxShelf-1&&1===e?(this.shelf++,this._currStrains()):this.shelf>0&&-1===e&&(this.shelf--,this._currStrains())}setShelf(e){this.shelf=e,this._currStrains()}canDrop(e){return t=>{let s=!1;if(t&&t.hasOwnProperty("src")&&("small"===t.src||"large"===t.src)){"empty"===this.strains[e].phageType&&(s=!0)}return s}}dropStrain(e,t){let s=e.data,i={strainNum:t,mutationList:s.shifts,deletion:s.deletion,parents:s.parents},r=this.user.id,n=this.fridge.scenCode;this._scenarioService.addStrain(r,n,i).subscribe(e=>{this.strains[t]={strainNum:e.strainNum,comment:e.comment,phageType:e.phageType,id:e.id,parents:e.parents,numParents:e.numParents},this._currStrains()},e=>{this.errorMessage=d.readErrorMessage(e)})}editPhage(e){let t=this.strains[e];const s=this._modalService.open(u.PhageDialogComponent,{windowClass:"phage-dialog"});s.componentInstance.phage=t,s.result.then(t=>{let s=typeof t;if("string"===s&&"delete"===t)this._deletePhage(e);else{if("object"!==s)return;this._editPhage(e,t)}},e=>{})}_editPhage(e,t){this._scenarioService.updateStrain(this.user.id,this.fridge.scenCode,t).takeUntil(this.isDestroyed$).subscribe(t=>{this.strains[e]=t,this._currStrains()},e=>{this.errorMessage=d.readErrorMessage(e)})}_deletePhage(e){let t=this.strains[e];this._scenarioService.deleteStrain(this.user.id,this.fridge.scenCode,t).takeUntil(this.isDestroyed$).subscribe(t=>{this.strains[e]={strainNum:e,phageType:"empty",comment:"",id:""},this._currStrains()},e=>{this.errorMessage=d.readErrorMessage(e)})}};g=i([n.Component({selector:"fridge",templateUrl:s(984),styleUrls:[s(985)]}),r("design:paramtypes",[a.Router,a.ActivatedRoute,h.AuthenticationService,c.CricketService,o.NgbModal])],g),t.FridgeComponent=g},983:function(e,t,s){e.exports=s.p+"public/app/cricket/fridge/phage-dialog.template.html"},984:function(e,t,s){e.exports=s.p+"public/app/cricket/fridge/fridge.template.html"},985:function(e,t,s){e.exports=s.p+"public/app/cricket/fridge/fridge.style.css"}});