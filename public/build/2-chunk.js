webpackJsonp([2],{926:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var o,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,s,r);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(c=(i<3?o(c):i>3?o(t,s,c):o(t,s))||c);return i>3&&c&&Object.defineProperty(t,s,c),c};Object.defineProperty(t,"__esModule",{value:!0});const o=s(1),i=s(16),c=s(54),n=s(932),a=s(933),u=s(935),d=s(936),l=s(937),h=s(938),p=s(421),f=s(959),m=s(939);let v=class{};v=r([o.NgModule({imports:[c.SharedModule,i.RouterModule.forChild(f.CourseRoutes)],declarations:[n.CourseCreateComponent,a.CourseIndivComponent,u.CourseEditComponent,d.CourseListComponent,l.CourseScenarioComponent,h.CourseMendelScenarioComponent],entryComponents:[p.ConfirmDeleteDialogComponent],providers:[m.CourseResolver]})],v),t.CourseModule=v},930:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortStudents=function(e,t){var s=e.lastName.toLowerCase().localeCompare(t.lastName.toLowerCase());return 0===s?e.firstName.toLowerCase().localeCompare(t.firstName.toLowerCase()):s}},932:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var o,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,s,r);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(c=(i<3?o(c):i>3?o(t,s,c):o(t,s))||c);return i>3&&c&&Object.defineProperty(t,s,c),c},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const i=s(1),c=s(16),n=s(13),a=s(122),u=s(17),d=s(45);let l=class{constructor(e,t,s,r){this._courseService=e,this._router=t,this._route=s,this._authService=r,this.errorMessage=""}ngOnInit(){this.admin=this._authService.getUser(),this.course=new n.FormGroup({courseNum:new n.FormControl("",n.Validators.required),description:new n.FormControl(""),level:new n.FormControl("all")})}get courseNum(){return this.course.get("courseNum")}get description(){return this.course.get("description")}get level(){return this.course.get("level")}createCourse(){this.subscription=this._courseService.createCourse(this.admin.id,this.course.value).subscribe(e=>{this._router.navigate(["../",e.courseNum],{relativeTo:this._route})},e=>{this.errorMessage=d.readErrorMessage(e)})}onCancel(){this._router.navigate(["../"],{relativeTo:this._route})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}};l=r([i.Component({selector:"course-create",templateUrl:s(951)}),o("design:paramtypes",[a.CourseService,c.Router,c.ActivatedRoute,u.AuthenticationService])],l),t.CourseCreateComponent=l},933:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var o,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,s,r);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(c=(i<3?o(c):i>3?o(t,s,c):o(t,s))||c);return i>3&&c&&Object.defineProperty(t,s,c),c},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const i=s(1),c=s(16),n=s(26),a=s(122),u=s(121),d=s(65),l=s(17),h=s(45),p=s(934);let f=class{constructor(e,t,s,r,o,i){this._router=e,this._route=t,this._courseService=s,this._authService=r,this._scenarioService=o,this._mpedeScenarioService=i,this.students=[],this.errorMessage="",this.mpedeScenarios=Array(),this.quizes=Array(),this.discoveries=Array(),this.pathways=Array(),this.isDestroyed$=new n.Subject}ngOnInit(){let e=this._authService.getUser();this.paramObserver=this._route.params.subscribe(t=>{let s=t.courseNum;this._courseService.getCourse(e.id,s).takeUntil(this.isDestroyed$).subscribe(t=>{this.courseInfo=t,this._courseService.getStudents(e.id,s).takeUntil(this.isDestroyed$).subscribe(e=>{this.students=e.sort(p.sortStudents),this._scenarioService.listScenarios().takeUntil(this.isDestroyed$).subscribe(e=>{this.scenarios=e}),this._mpedeScenarioService.listScenarios(this.courseInfo.level).takeUntil(this.isDestroyed$).subscribe(e=>{this.mpedeOptions=e,this.mpedeOptions.forEach(e=>{"scenario"===e.scenType?this.mpedeScenarios.push(e):"quiz"===e.scenType?this.quizes.push(e):"discovery"===e.scenType?this.discoveries.push(e):"pathway"===e.scenType&&this.pathways.push(e)}),this.mpedeScenarios=this.mpedeScenarios.sort((e,t)=>e.ordOfScen<t.ordOfScen?-1:e.ordOfScen>t.ordOfScen?1:0),this.quizes=this.quizes.sort((e,t)=>e.ordOfScen<t.ordOfScen?-1:e.ordOfScen>t.ordOfScen?1:0),this.discoveries=this.discoveries.sort((e,t)=>e.ordOfScen<t.ordOfScen?-1:e.ordOfScen>t.ordOfScen?1:0),this.pathways=this.pathways.sort((e,t)=>e.ordOfScen<t.ordOfScen?-1:e.ordOfScen>t.ordOfScen?1:0)})})},e=>{this.errorMessage=h.readErrorMessage(e)})})}ngOnDestroy(){this.paramObserver.unsubscribe(),this.isDestroyed$.next(!0),this.isDestroyed$.unsubscribe()}};f=r([i.Component({selector:"course-indiv",templateUrl:s(953)}),o("design:paramtypes",[c.Router,c.ActivatedRoute,a.CourseService,l.AuthenticationService,u.CricketService,d.MendelpedeScenarioService])],f),t.CourseIndivComponent=f},934:function(e,t,s){"use strict";function r(e){for(var s in e)t.hasOwnProperty(s)||(t[s]=e[s])}Object.defineProperty(t,"__esModule",{value:!0}),r(s(952)),r(s(930)),r(s(422))},935:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var o,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,s,r);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(c=(i<3?o(c):i>3?o(t,s,c):o(t,s))||c);return i>3&&c&&Object.defineProperty(t,s,c),c},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const i=s(1),c=s(16),n=s(70),a=s(26),u=s(122),d=s(17),l=s(421),h=s(930),p=s(45);let f=class{constructor(e,t,s,r,o){this._router=e,this._route=t,this._courseService=s,this._authService=r,this._modalService=o,this.errorMessage="",this.isDestroyed$=new a.Subject}ngOnInit(){this._admin=this._authService.getUser(),this.paramObserver=this._route.params.subscribe(e=>{let t=e.courseNum;this._courseService.getCourse(this._admin.id,t).takeUntil(this.isDestroyed$).subscribe(e=>{this.courseInfo=e,this._courseService.getPossibleInstructors(this._admin.id,t).takeUntil(this.isDestroyed$).subscribe(e=>{this.possibleInstr=e.sort(h.sortStudents)},e=>{this.errorMessage=p.readErrorMessage(e),this.possibleInstr=[]})},e=>{this.errorMessage=p.readErrorMessage(e)})})}onCancel(){this._router.navigate(["../"],{relativeTo:this._route})}update(){this._courseService.editCourse(this._admin.id,this.courseInfo.courseNum,this.courseInfo).takeUntil(this.isDestroyed$).subscribe(e=>{this._router.navigate(["../"],{relativeTo:this._route})},e=>{this.errorMessage=p.readErrorMessage(e)})}addInstructor(){this.selectedAdd&&this._courseService.addInstructor(this._admin.id,this.courseInfo.courseNum,this.selectedAdd).takeUntil(this.isDestroyed$).subscribe(e=>{this.courseInfo=e,this.possibleInstr=this.possibleInstr.filter(e=>e.userId!=this.selectedAdd)},e=>{this.errorMessage=p.readErrorMessage(e)})}deleteInstructor(e){console.log("Deleting "+e)}deleteCourse(){const e=this._modalService.open(l.ConfirmDeleteDialogComponent,{size:"sm",windowClass:"delete-modal"});e.componentInstance.message="Are you sure you want to delete course "+this.courseInfo.courseNum+"?",e.result.then(e=>{"delete"===e&&this._callDeleteCourse()},e=>{})}_callDeleteCourse(){this._courseService.deleteCourse(this._admin.id,this.courseInfo.courseNum).takeUntil(this.isDestroyed$).subscribe(e=>{this._router.navigate(["/admin/courses"])},e=>{this.errorMessage=p.readErrorMessage(e)})}deleteCourseStudents(){const e=this._modalService.open(l.ConfirmDeleteDialogComponent,{size:"sm"});e.componentInstance.message="Are you sure you want to delete all students in course "+this.courseInfo.courseNum+"?",e.result.then(e=>{"delete"===e&&this._callDeleteCourseStudents()},e=>{})}_callDeleteCourseStudents(){this._courseService.deleteStudents(this._admin.id,this.courseInfo.courseNum).takeUntil(this.isDestroyed$).subscribe(e=>{this._router.navigate(["/admin/courses/",this.courseInfo.courseNum])},e=>{this.errorMessage=p.readErrorMessage(e)})}ngOnDestroy(){this.paramObserver.unsubscribe(),this.isDestroyed$.next(!0),this.isDestroyed$.unsubscribe()}};f=r([i.Component({selector:"course-edit",templateUrl:s(954),styleUrls:[s(955)]}),o("design:paramtypes",[c.Router,c.ActivatedRoute,u.CourseService,d.AuthenticationService,n.NgbModal])],f),t.CourseEditComponent=f},936:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var o,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,s,r);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(c=(i<3?o(c):i>3?o(t,s,c):o(t,s))||c);return i>3&&c&&Object.defineProperty(t,s,c),c},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const i=s(1),c=s(122),n=s(17);let a=class{constructor(e,t){this._courseService=e,this._authService=t}ngOnInit(){let e=this._authService.getUser();this.subscription=this._courseService.listCourses(e.id).subscribe(e=>{this.courses=e})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}};a=r([i.Component({selector:"course-list",templateUrl:s(956)}),o("design:paramtypes",[c.CourseService,n.AuthenticationService])],a),t.CourseListComponent=a},937:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var o,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,s,r);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(c=(i<3?o(c):i>3?o(t,s,c):o(t,s))||c);return i>3&&c&&Object.defineProperty(t,s,c),c},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const i=s(1),c=s(16),n=s(26),a=s(122),u=s(121),d=s(17),l=s(420),h=s(45);let p=class{constructor(e,t,s,r,o,i){this._router=e,this._route=t,this._authService=s,this._courseService=r,this._studentService=o,this._scenarioService=i,this.students=[],this.errorMessage="",this.isDestroyed$=new n.Subject}ngOnInit(){this.admin=this._authService.getUser(),this.paramObserver=this._route.params.subscribe(e=>{let t=e.courseNum,s=e.scenId;this.courseNum=t.toUpperCase(),this._scenarioService.getScenario(s).takeUntil(this.isDestroyed$).subscribe(e=>{this.scenario=e,this._courseService.getScenarioStatus(this.admin.id,t,s).takeUntil(this.isDestroyed$).subscribe(e=>{this.students=e},e=>{this.errorMessage=h.readErrorMessage(e)})},e=>{this.errorMessage=h.readErrorMessage(e)})})}formatAccess(e){return e?"Access granted":"Access not granted"}grantAccess(e){let t=this.scenario.scenCode,s=this.students[e].userId;this._studentService.grantScenAccess(this.admin.id,s,t,!0).takeUntil(this.isDestroyed$).subscribe(s=>{void 0!==s&&null!==s&&(this.students[e].status=s.accessGranted[t])},e=>{this.errorMessage=h.readErrorMessage(e)})}goToFridge(e){this._router.navigate(["/admin/students/",e,"cricket",this.scenario.scenCode])}ngOnDestroy(){this.paramObserver.unsubscribe(),this.isDestroyed$.next(!0),this.isDestroyed$.unsubscribe()}};p=r([i.Component({selector:"course-scen",templateUrl:s(957),styles:[".access-status { color: #495057; }",".student-label {font-weight: 500; }"]}),o("design:paramtypes",[c.Router,c.ActivatedRoute,d.AuthenticationService,a.CourseService,l.StudentService,u.CricketService])],p),t.CourseScenarioComponent=p},938:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var o,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,s,r);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(c=(i<3?o(c):i>3?o(t,s,c):o(t,s))||c);return i>3&&c&&Object.defineProperty(t,s,c),c},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const i=s(1),c=s(16),n=s(26),a=s(122),u=s(65),d=s(17),l=s(934),h=s(45);let p=class{constructor(e,t,s,r,o){this._router=e,this._route=t,this._authService=s,this._courseService=r,this._scenarioService=o,this.students=[],this.errorMessage="",this.isDestroyed$=new n.Subject}ngOnInit(){this.admin=this._authService.getUser(),this.paramObserver=this._route.params.subscribe(e=>{let t=e.courseNum,s=e.scenShortCode;this.courseNum=t.toUpperCase(),this._scenarioService.getScenario(s).takeUntil(this.isDestroyed$).subscribe(e=>{this.scenario=e,this._courseService.getMendelScenarioStatus(this.admin.id,t,s).takeUntil(this.isDestroyed$).subscribe(e=>{this.students=e.sort(l.sortStudents)},e=>{this.errorMessage=h.readErrorMessage(e)})},e=>{this.errorMessage=h.readErrorMessage(e)})})}goToFridge(e){this._router.navigate(["/admin/students/",e,"mendelpede",this.scenario.shortCode])}downloadCSV(){var e="data:text/csv;charset=utf-8,";e+=["Last Name","First Name","Score"].join(",")+"\n";for(let t of this.students){e+=[t.lastName,t.firstName,t.quiz].join(",")+"\n"}const t=encodeURI(e),s=this.courseNum+"_"+this.scenario.shortCode+".csv",r=document.createElement("a");r.setAttribute("target","_blank"),r.setAttribute("href",t),r.setAttribute("download",s),document.body.appendChild(r),r.click(),r.remove()}ngOnDestroy(){this.paramObserver.unsubscribe(),this.isDestroyed$.next(!0),this.isDestroyed$.unsubscribe()}};p=r([i.Component({selector:"course-scen",templateUrl:s(958),styles:[]}),o("design:paramtypes",[c.Router,c.ActivatedRoute,d.AuthenticationService,a.CourseService,u.MendelpedeScenarioService])],p),t.CourseMendelScenarioComponent=p},939:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var o,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,s,r);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(c=(i<3?o(c):i>3?o(t,s,c):o(t,s))||c);return i>3&&c&&Object.defineProperty(t,s,c),c},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const i=s(1),c=s(26),n=s(122),a=s(17);let u=class{constructor(e,t){this._courseService=e,this._authService=t}resolve(e,t){let s=this._authService.getUser();const r=e.params.courseNum;return r?this._courseService.getCourse(s.id,r):new c.Observable}};u=r([i.Injectable(),o("design:paramtypes",[n.CourseService,a.AuthenticationService])],u),t.CourseResolver=u},951:function(e,t,s){e.exports=s.p+"public/app/admin/course/course-create/course-create.template.html"},952:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CourseLevels=["all","graduate","undergraduate"]},953:function(e,t,s){e.exports=s.p+"public/app/admin/course/course-indiv/course-indiv.template.html"},954:function(e,t,s){e.exports=s.p+"public/app/admin/course/course-edit/course-edit.template.html"},955:function(e,t,s){e.exports=s.p+"public/app/admin/course/course-edit/course-edit.style.css"},956:function(e,t,s){e.exports=s.p+"public/app/admin/course/course-list/course-list.template.html"},957:function(e,t,s){e.exports=s.p+"public/app/admin/course/course-scenario/course-scenario.template.html"},958:function(e,t,s){e.exports=s.p+"public/app/admin/course/course-mendel-scenario/course-mendel-scenario.template.html"},959:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(939),o=s(185),i=s(186),c=s(932),n=s(933),a=s(935),u=s(936),d=s(937),l=s(938);t.CourseRoutes=[{path:"",children:[{path:"create",component:c.CourseCreateComponent,data:{breadcrumbs:"Create new course"}},{path:":courseNum",resolve:{course:r.CourseResolver},data:{breadcrumbs:"{{course.courseNum}}"},children:[{path:"edit",component:a.CourseEditComponent},{path:":scenId",component:d.CourseScenarioComponent,resolve:{scenario:o.ScenarioResolver},data:{breadcrumbs:"{{ scenario.label }}"}},{path:"mendelpede/:scenShortCode",component:l.CourseMendelScenarioComponent,resolve:{mendelpedeScenario:i.MendelpedeScenarioResolver},data:{breadcrumbs:"{{ mendelpedeScenario.label }}"}},{path:"",component:n.CourseIndivComponent}]},{path:"",component:u.CourseListComponent}]}]}});